{"title":"Practice 2","markdown":{"yaml":{"title":"Practice 2","subtitle":"135 points","title-block-banner":true,"author":"Esteban Montenegro-Montenegro","date":"2023-10-30","format":{"html":{"highlight-style":"a11y-dark","code-fold":true,"code-tools":true}},"resources":["webr-serviceworker.js","webr-worker.js"],"filters":["webr"],"engine":"knitr","webr":{"packages":["ggplot2","dplyr"],"home-dir":"/home/esteban/MEGA/stanStateDocuments/PSYC3000/practice2"},"theme":{"light":"sandstone","dark":"cyborg"},"toc":true,"toc-depth":4,"toc-title":"Sections","self-contained":true,"bibliography":"references.bib","csl":"apa.csl","editor":{"markdown":{"wrap":72}},"code-annotations":"hover"},"headingText":"What have you learned so far in R?","containsRefs":false,"markdown":"\n\n\nAfter completing the first practice, you should have learned these key\nconcepts:\n\n-   `R` is an object-oriented programming language.\n-   `R` is free and open source, and you are able to install as many\n    packages as you want for free.\n-   You learned the concept of \"package\".\n-   You learned about data frames.\n\nIn this practice we will work with `data frames` , we will create new\nvariables, and we will use extensively `pipes` along with the package\n`tidyverse`.\n\n::: callout-note\n## Good News!\n\nIn this practice you will be able to run `R` code straight from your web\nbrowser. Isn't it awesome!\n:::\n\n# Let's put a frame on those data....\n\nThe `data frame` is one type of object in `R`, and it is extremely\nuseful to represent information as a data frame. This `R` object looks\nvery similar to a spreadsheet in Excel, each column represents a\nvariable, while each row represents an observation.\n\nIn this practice session we will wrangle the data set named\n`ruminationToClean.csv`. You may download the data set by [Clicking\nHere.](https://mega.nz/file/eJFU3BKA#ljpDkezv325VEI2Ii6xuXoU8BbmPg-lNqdHH0XQqk5s){target=\"_blank\"}\nThis is a dataset that was part of a large project that I conducted in\nCosta Rica in collaboration with a colleague and friend David Campos.\nParticipants were high school students from the Central Valley in Costa\nRica. The aim of this study was to explore the relationship between\nrumination and depression in teenagers. We added metacognitive beliefs\nto the study, but we will not talk about metacognition in this practice.\n\n::: column-margin\n*You may follow me and enroll my Cognitive Processes course to know more\nabout metacognition*\n:::\n\nWhen I say ***wrangle*** I mean to manipulate the data set and clean the\ndata. In real life, data sets are not perfectly clean. Many times we\nneed to delete observations that are extreme (careless answers,\nmistakes, etc.), or sometimes we need to delete new variables.\nAdditionally, we might need to compute new variables. We will cover all\nthese topics in this practice using `R`.\n\n## The package `tidyverse` is your friend\n\nIf you run the following code, you'll see the variable names in the data\nset `ruminationToClean.csv`:\n\n::: column-margin\n*I'm reading in the data file from my personal repository, fancy right?*\n:::\n\n```{webr-r}\n## Link to the data set:\n\ndataLink <- \"https://raw.githubusercontent.com/blackhill86/mm2/main/dataSets/ruminationToClean.csv\"\n\nruminationRaw <- read.csv(url(dataLink ),\n                          na.strings = \"99\") \ncolnames(ruminationRaw)\n```\n\nAs you can see, we have a large list of variables. We are using the\nfunction `colnames()` to get a list of column names, which in this case\nare research variables. Several of these variables could be dropped from\nthe data set, others will need to be renamed.\n\n### Dropping variables\n\nIn this example we will use the function `select()` from the package\n`tidyverse`. Remember that you'll need to call the package by running\n`library(tidyverse)`.\n\n```{webr}\n### Let's remove \"age\" from the data set\nruminationClean <- ruminationRaw |>\n                   select(-age)\n\ncolnames(ruminationClean)\n\n```\n\n*What is happening here?* You may have noticed that inside the function\n`selection()` I am adding the name of the variable I want to delete from\nthe data set, and then I added a minus sign. When you add a minus sign\nbefore the name of the variable, the package will delete the variable\nthat you list with a minus sign. You can do the same with several\nvariables at the same time:\n\n```{webr}\n### Let's remove \"age\" from the data set\nruminationClean <- ruminationRaw |>\n                   select(-school, -grade)\n\ncolnames(ruminationClean)\n\n```\n\nNow the variables, `age`, `school`, and `grade` are not longer in the\ndataset, if you don't believe me click on `RUN CODE`.\n\n::: callout-tip\n## Excercise 1 (30 points)\n\n1)  Download the data set\n    [`ruminationToClean.csv`](https://mega.nz/file/eJFU3BKA#ljpDkezv325VEI2Ii6xuXoU8BbmPg-lNqdHH0XQqk5s){target=\"_blank\"}\n    then open the data file using\n    `ruminationRaw <- read.csv(file.choose())` or you may copy the code\n    to open the data from the online repository. After opening the data\n    in `R`, delete from the data set all the variables that start with\n    th stem `EATQ_R_`.\n:::\n\n### Change variable names\n\nIn some occasions, the research variable was named wrongly or the name\ndoes not reflect the content of the variable. In the data set\n`ruminationToClean.csv` there are variables with names in Spanish, we\ncan change them:\n\n```{webr}\n## rename() requires the following grammar:\n##  oldName = newname\n\nruminationEnglishNames <- ruminationRaw |>\n  rename(otherTreatments = OtrosEspeci,\n         takinPills = medicamentos,\n         psychTreatment = tratamientopsicologico,\n         ruminationTotalScore = Rumiacion)\n\ncolnames(ruminationEnglishNames)\n\n```\n\nIn this example, you can see that I'm using the function `rename()` from\nthe package `dplyr` which is inside the package `tidyverse`. When you\nuse `rename()` you'll need to declare the new name first and then the\nold variable name that will be replaced.\n\n::: callout-tip\n## Excercise 2 (35 points)\n\n2)  In psychological measurement it is common to implement\n    questionnaires with Likert-response options. We typically sum the\n    items corresponding to the latent variable or construct that we are\n    measuring. For example in the\n    [`ruminationToClean.csv`](https://mega.nz/file/eJFU3BKA#ljpDkezv325VEI2Ii6xuXoU8BbmPg-lNqdHH0XQqk5s){target=\"_blank\"}\n    the construct of \"Rumination\" is measured by the [Children's\n    Response Styles Questionnaire\n    (CRSQ),](https://www.researchgate.net/profile/Randy-Auerbach-2/publication/6286250_Responses_to_Depression_in_Children_Reconceptualizing_the_Relation_Among_Response_Styles/links/54e547dc0cf29865c336b5c8/Responses-to-Depression-in-Children-Reconceptualizing-the-Relation-Among-Response-Styles.pdf){target=\"_blank\"}\n    however the variable names are not self-explained. Your task is to\n    change the name of the variables with stem `CRSQ`, the new variables\n    should have the stem `rumination_itemNumber`. For example\n    `rename(CRSQ1=rumination_1)`. Remember to save the changes in a new\n    object.\n:::\n\n### Compute a new variable\n\nAs always in programming languages, there are several ways to create a\nnew research variable in a data frame. But, we will use the `tidyverse`\nmethod by using a function that actually works like a verb. The function\n`mutate()` will help use to create new variables.\n\nI mentioned in ***Exercise 2*** psychology studies *latent variables*\nalso known as *hypothetical constructs*, they have many names, but at\nthe end we study variables that are implicit; we can measure them but we\ndon't see them. For example, we have studied variables such depression\nor rumination in this course, these are latent variables because you\ncannot capture depression or you don't see it walking, however you are\nable to measure depression by asking about symptoms and thoughts.\n\n![Example of a latent\nvariable](latentVariable.png){fig-alt=\"It is a figure where there is a circle, the word \\\"depression\\\" is inside the circle. Straight arrows are pointing to three squares. The first square has the label \\\"I am feeling lonely\\\", the second square has the label \\\"I feel sad\\\", the third square has the label \\\"I lost my appetite\\\". The squares are grouped as \\\"Observed indicators\\\". The circle with the word depression inside is grouped as a \\\"latent variable\\\".\"\nfig-align=\"center\" width=\"1000\"}\n\nIn the figure above you can see a representation of a latent variable.\nIn psychology we often assume that the latent variable is the common\nfactor underlying our questions, -in this example- questions related to\ndepression.\n\nWhen we analyze data that corresponds with latent variables we have two\noptions:\n\n1.  We can create a Structural Equation Modeling (We won't cover this\n    topic).\n\n2.  We sum all the items to compute a total score. This total score will\n    be our approximation to the latent variable. (Yes, this is covered\n    in this practice).\n\n::: column-margin\n![](roll.jpg){fig-alt=\"This is a meme, the character rolls her eyes insinuating the explanation was boring\"\nwidth=\"120\"}\n:::\n\nI'll show an example in the next chunk of `R` code:\n\n```{webr}\n#-------------------------------------------------------------------------#\n# Calculates a depression total score and then creates a new variable     #\n# in the data frame.                                                      #  \n#-------------------------------------------------------------------------#\n\nruminationDepresionScore <- ruminationRaw |>\n  mutate(\n    depressionTotal = rowSums(across(starts_with(\"CDI\"))) ### Starts_with() helps to avoid a lot of typing\n    )\n\n\n```\n\nIn this example we are using the function `mutate()` to create a new\ncolumn named `depressionTotal`, this new `depressionTotal` column will\ncontain the depression total score for each participant. In this study\nwe included the ***\"Child's Depression Inventory (CDI)\"***, that's why\nthe columns follow the stem \"CDI\". You can see the new column in the\nnext table:\n\n```{r, setup, include=FALSE}\npath <- \"/home/esteban/MEGA/stanStateDocuments/PSYC3000/practice2\"\nknitr::opts_knit$set(root.dir = path )\n\nlibrary(dplyr)\nlibrary(gt)\n```\n\n```{r, echo=TRUE, include=TRUE, warning=FALSE, message=FALSE}\n\n\nruminationRaw <- read.csv(\"ruminationToClean.csv\", na.string = \"99\")\nruminationDepresionScore <- ruminationRaw |>\n  mutate(\n    depressionTotal = rowSums(across(starts_with(\"CDI\")))\n    )\nruminationDepresionScore |> select(starts_with(\"CDI\"),\t\n                                   depressionTotal ) |>\n  gt_preview()\n\n```\n\n::: callout-tip\n## Excercise 3 (30 points)\n\n3)  In the data set\n    [`ruminationToClean.csv`](https://mega.nz/file/eJFU3BKA#ljpDkezv325VEI2Ii6xuXoU8BbmPg-lNqdHH0XQqk5s){target=\"_blank\"}\n    you'll find seven columns with the stem \"`DASS`\". These columns\n    correspond to the instrument named: [Depression, Anxiety, and Stress\n    Scale\n    (DASS)](https://maic.qld.gov.au/wp-content/uploads/2016/07/DASS-21.pdf){target=\"_blank\"}.\n    This is an scale that measures three latent variables at the same\n    time, but only the anxiety items were added in this study.\n\nYour task is to change the name of the \"DASS\" items, you should think a\nmore informative name for these items in the data frame. After that, you\nwill have to compute the total score of anxiety for each participant in\nthe data frame.\n:::\n\n### Let's cleanse this data set\n\n::: column-margin\n![](datadirty.png){fig-alt=\"This is a meme, the character is a aging adult cleaning a data set like it was a window in a house\"\nwidth=\"200\"}\n:::\n\nIt is always satisfactory to clean a data set and then see the final\nproduct, but so far we have cleaned these data in small steps. I'll\nclean the data set in one step. In this example I will delete\nunnecessary columns (aka research variables), and I will translate the\nvariables to English when necessary:\n\n```{webr}\nruminationClean <- ruminationRaw |>\n  rename(otherTreatments = OtrosEspeci,\n         takinPills = medicamentos,\n         psychTreatment = tratamientopsicologico,\n         ruminationTotalScore = Rumiacion,\n         activation = ACTIVACION,\n         attention = ATENCION) |>\n  select(-PBRSad, \n         -NBRS2ad, \n         -starts_with(\"EATQ_R_\"))\n\ncolnames(ruminationClean)\n\n```\n\n::: callout-tip\n## Excercise 4 (10 points)\n\n4)  Describe the steps taken in the `R` code above.\n:::\n\n# Examine your data\n\nIn this second part we will create several plots to examine and explore\nour data. But first we'll need to compute total scores again, because\nafter all, the main point is to make conclusions about our latent\nvariables (a.k.a latent factors).\n\n```{webr}\n### I'm calculating the total score of depression, rumination, and anxiety.\n\nruminationClean <- ruminationClean |> mutate(\n    depressionTotal = rowSums(across(starts_with(\"CDI\"))), ### starts_with() function is a time saver!\n    anxietyTotal = rowSums(across(starts_with(\"DASS\"))),\n    ruminationTotal = rowSums(across(starts_with(\"CR\"))))\n\n## This part will print only the new variables in the console\nruminationClean |> \n  select(depressionTotal,\n         anxietyTotal,\n         ruminationTotal) |>\n  head()\n\n```\n\nWe have now three total scores corresponding to three different latent\nfactors: depression, anxiety, and depression. We are in a good place to\nexplore the data. It is healthy to start looking at histograms because\nthey are now continuous variables:\n\n```{webr}\nhist(ruminationClean$depressionTotal, \n     main = \"Histogram of depression's total score\",\n     breaks = 12\n     )\n```\n\nWe can see in the histogram that low values are more frequent. This is\nexpected because all the participants are healthy teenagers without any\nhistory of psychopathology. Also, pay attention that we are using the\nfunction `hist()` in `R`.\n\nWe can also generate a density plot to have an idea of the observed\nshape:\n\n```{webr}\n\n### First we need to get an estimate of the observed density:\n\nruminationDensity <- density(ruminationClean$depressionTotal, \n                             na.rm = TRUE) ## We need to add \"na.rm=\" \n#                                         because there are missing values.\nplot(ruminationDensity ,\n     main=\"Density plot: Rumination Total Score\" ,\n     xlab= \"Rumination total score\",\n     ylab= \"Likelihood\")\n```\n\nNotice the function `plot()` which is a generic function in `R` it is\nused as a method in the environment. This functions comes with `R` as a\nbase function. If you need to know how to use it you can run `?plot()`,\nbut the help section might not be helpful for new users. Additionally,\npay attention on how you can change the labels in your plot.\n\n::: callout-tip\n## Excercise 5 (15 points)\n\n5)  Create a density plot for the depression total score. Where is most\n    of the density located?\n\n::: callout-note\nR Studio has an option to save plots. Just click on the tab named\n\"Plots\", then click where it says \"Export\". You may click on ***\"Copy to\nclipboard\"***, this will allow you to paste the image on any software.\nYou may also select to export the image as PDF file or image.\n\n![Option to save generated plots](saveImage.png)\n:::\n:::\n\nBox plots are also useful to understand our data better, you may revisit\nthe box plot's anatomy in this website:\n[link.](https://r-graph-gallery.com/boxplot.html){target=\"_blank\"}\n\nWe can see the next example (Click on Run Code):\n\n```{webr}\n\nboxplot(ruminationTotal ~ sex,\n        data=ruminationClean, \n        main=\"Box Plot of Rumination total score by Sex\",\n   xlab=\"Sex\", \n   ylab=\"Rumination total score\",\n   names = c(\"women\", \"men\"))\n```\n\n::: callout-tip\n## Excercise 6 (15 points)\n\n6)  Can you tell which group in the box plot has the highest median in\n    rumination? What else can you see in the box plot?\n:::\n\n![](finalMeme.jpg){fig-align=\"center\" width=\"400\"}\n","srcMarkdownNoYaml":"\n\n# What have you learned so far in R?\n\nAfter completing the first practice, you should have learned these key\nconcepts:\n\n-   `R` is an object-oriented programming language.\n-   `R` is free and open source, and you are able to install as many\n    packages as you want for free.\n-   You learned the concept of \"package\".\n-   You learned about data frames.\n\nIn this practice we will work with `data frames` , we will create new\nvariables, and we will use extensively `pipes` along with the package\n`tidyverse`.\n\n::: callout-note\n## Good News!\n\nIn this practice you will be able to run `R` code straight from your web\nbrowser. Isn't it awesome!\n:::\n\n# Let's put a frame on those data....\n\nThe `data frame` is one type of object in `R`, and it is extremely\nuseful to represent information as a data frame. This `R` object looks\nvery similar to a spreadsheet in Excel, each column represents a\nvariable, while each row represents an observation.\n\nIn this practice session we will wrangle the data set named\n`ruminationToClean.csv`. You may download the data set by [Clicking\nHere.](https://mega.nz/file/eJFU3BKA#ljpDkezv325VEI2Ii6xuXoU8BbmPg-lNqdHH0XQqk5s){target=\"_blank\"}\nThis is a dataset that was part of a large project that I conducted in\nCosta Rica in collaboration with a colleague and friend David Campos.\nParticipants were high school students from the Central Valley in Costa\nRica. The aim of this study was to explore the relationship between\nrumination and depression in teenagers. We added metacognitive beliefs\nto the study, but we will not talk about metacognition in this practice.\n\n::: column-margin\n*You may follow me and enroll my Cognitive Processes course to know more\nabout metacognition*\n:::\n\nWhen I say ***wrangle*** I mean to manipulate the data set and clean the\ndata. In real life, data sets are not perfectly clean. Many times we\nneed to delete observations that are extreme (careless answers,\nmistakes, etc.), or sometimes we need to delete new variables.\nAdditionally, we might need to compute new variables. We will cover all\nthese topics in this practice using `R`.\n\n## The package `tidyverse` is your friend\n\nIf you run the following code, you'll see the variable names in the data\nset `ruminationToClean.csv`:\n\n::: column-margin\n*I'm reading in the data file from my personal repository, fancy right?*\n:::\n\n```{webr-r}\n## Link to the data set:\n\ndataLink <- \"https://raw.githubusercontent.com/blackhill86/mm2/main/dataSets/ruminationToClean.csv\"\n\nruminationRaw <- read.csv(url(dataLink ),\n                          na.strings = \"99\") \ncolnames(ruminationRaw)\n```\n\nAs you can see, we have a large list of variables. We are using the\nfunction `colnames()` to get a list of column names, which in this case\nare research variables. Several of these variables could be dropped from\nthe data set, others will need to be renamed.\n\n### Dropping variables\n\nIn this example we will use the function `select()` from the package\n`tidyverse`. Remember that you'll need to call the package by running\n`library(tidyverse)`.\n\n```{webr}\n### Let's remove \"age\" from the data set\nruminationClean <- ruminationRaw |>\n                   select(-age)\n\ncolnames(ruminationClean)\n\n```\n\n*What is happening here?* You may have noticed that inside the function\n`selection()` I am adding the name of the variable I want to delete from\nthe data set, and then I added a minus sign. When you add a minus sign\nbefore the name of the variable, the package will delete the variable\nthat you list with a minus sign. You can do the same with several\nvariables at the same time:\n\n```{webr}\n### Let's remove \"age\" from the data set\nruminationClean <- ruminationRaw |>\n                   select(-school, -grade)\n\ncolnames(ruminationClean)\n\n```\n\nNow the variables, `age`, `school`, and `grade` are not longer in the\ndataset, if you don't believe me click on `RUN CODE`.\n\n::: callout-tip\n## Excercise 1 (30 points)\n\n1)  Download the data set\n    [`ruminationToClean.csv`](https://mega.nz/file/eJFU3BKA#ljpDkezv325VEI2Ii6xuXoU8BbmPg-lNqdHH0XQqk5s){target=\"_blank\"}\n    then open the data file using\n    `ruminationRaw <- read.csv(file.choose())` or you may copy the code\n    to open the data from the online repository. After opening the data\n    in `R`, delete from the data set all the variables that start with\n    th stem `EATQ_R_`.\n:::\n\n### Change variable names\n\nIn some occasions, the research variable was named wrongly or the name\ndoes not reflect the content of the variable. In the data set\n`ruminationToClean.csv` there are variables with names in Spanish, we\ncan change them:\n\n```{webr}\n## rename() requires the following grammar:\n##  oldName = newname\n\nruminationEnglishNames <- ruminationRaw |>\n  rename(otherTreatments = OtrosEspeci,\n         takinPills = medicamentos,\n         psychTreatment = tratamientopsicologico,\n         ruminationTotalScore = Rumiacion)\n\ncolnames(ruminationEnglishNames)\n\n```\n\nIn this example, you can see that I'm using the function `rename()` from\nthe package `dplyr` which is inside the package `tidyverse`. When you\nuse `rename()` you'll need to declare the new name first and then the\nold variable name that will be replaced.\n\n::: callout-tip\n## Excercise 2 (35 points)\n\n2)  In psychological measurement it is common to implement\n    questionnaires with Likert-response options. We typically sum the\n    items corresponding to the latent variable or construct that we are\n    measuring. For example in the\n    [`ruminationToClean.csv`](https://mega.nz/file/eJFU3BKA#ljpDkezv325VEI2Ii6xuXoU8BbmPg-lNqdHH0XQqk5s){target=\"_blank\"}\n    the construct of \"Rumination\" is measured by the [Children's\n    Response Styles Questionnaire\n    (CRSQ),](https://www.researchgate.net/profile/Randy-Auerbach-2/publication/6286250_Responses_to_Depression_in_Children_Reconceptualizing_the_Relation_Among_Response_Styles/links/54e547dc0cf29865c336b5c8/Responses-to-Depression-in-Children-Reconceptualizing-the-Relation-Among-Response-Styles.pdf){target=\"_blank\"}\n    however the variable names are not self-explained. Your task is to\n    change the name of the variables with stem `CRSQ`, the new variables\n    should have the stem `rumination_itemNumber`. For example\n    `rename(CRSQ1=rumination_1)`. Remember to save the changes in a new\n    object.\n:::\n\n### Compute a new variable\n\nAs always in programming languages, there are several ways to create a\nnew research variable in a data frame. But, we will use the `tidyverse`\nmethod by using a function that actually works like a verb. The function\n`mutate()` will help use to create new variables.\n\nI mentioned in ***Exercise 2*** psychology studies *latent variables*\nalso known as *hypothetical constructs*, they have many names, but at\nthe end we study variables that are implicit; we can measure them but we\ndon't see them. For example, we have studied variables such depression\nor rumination in this course, these are latent variables because you\ncannot capture depression or you don't see it walking, however you are\nable to measure depression by asking about symptoms and thoughts.\n\n![Example of a latent\nvariable](latentVariable.png){fig-alt=\"It is a figure where there is a circle, the word \\\"depression\\\" is inside the circle. Straight arrows are pointing to three squares. The first square has the label \\\"I am feeling lonely\\\", the second square has the label \\\"I feel sad\\\", the third square has the label \\\"I lost my appetite\\\". The squares are grouped as \\\"Observed indicators\\\". The circle with the word depression inside is grouped as a \\\"latent variable\\\".\"\nfig-align=\"center\" width=\"1000\"}\n\nIn the figure above you can see a representation of a latent variable.\nIn psychology we often assume that the latent variable is the common\nfactor underlying our questions, -in this example- questions related to\ndepression.\n\nWhen we analyze data that corresponds with latent variables we have two\noptions:\n\n1.  We can create a Structural Equation Modeling (We won't cover this\n    topic).\n\n2.  We sum all the items to compute a total score. This total score will\n    be our approximation to the latent variable. (Yes, this is covered\n    in this practice).\n\n::: column-margin\n![](roll.jpg){fig-alt=\"This is a meme, the character rolls her eyes insinuating the explanation was boring\"\nwidth=\"120\"}\n:::\n\nI'll show an example in the next chunk of `R` code:\n\n```{webr}\n#-------------------------------------------------------------------------#\n# Calculates a depression total score and then creates a new variable     #\n# in the data frame.                                                      #  \n#-------------------------------------------------------------------------#\n\nruminationDepresionScore <- ruminationRaw |>\n  mutate(\n    depressionTotal = rowSums(across(starts_with(\"CDI\"))) ### Starts_with() helps to avoid a lot of typing\n    )\n\n\n```\n\nIn this example we are using the function `mutate()` to create a new\ncolumn named `depressionTotal`, this new `depressionTotal` column will\ncontain the depression total score for each participant. In this study\nwe included the ***\"Child's Depression Inventory (CDI)\"***, that's why\nthe columns follow the stem \"CDI\". You can see the new column in the\nnext table:\n\n```{r, setup, include=FALSE}\npath <- \"/home/esteban/MEGA/stanStateDocuments/PSYC3000/practice2\"\nknitr::opts_knit$set(root.dir = path )\n\nlibrary(dplyr)\nlibrary(gt)\n```\n\n```{r, echo=TRUE, include=TRUE, warning=FALSE, message=FALSE}\n\n\nruminationRaw <- read.csv(\"ruminationToClean.csv\", na.string = \"99\")\nruminationDepresionScore <- ruminationRaw |>\n  mutate(\n    depressionTotal = rowSums(across(starts_with(\"CDI\")))\n    )\nruminationDepresionScore |> select(starts_with(\"CDI\"),\t\n                                   depressionTotal ) |>\n  gt_preview()\n\n```\n\n::: callout-tip\n## Excercise 3 (30 points)\n\n3)  In the data set\n    [`ruminationToClean.csv`](https://mega.nz/file/eJFU3BKA#ljpDkezv325VEI2Ii6xuXoU8BbmPg-lNqdHH0XQqk5s){target=\"_blank\"}\n    you'll find seven columns with the stem \"`DASS`\". These columns\n    correspond to the instrument named: [Depression, Anxiety, and Stress\n    Scale\n    (DASS)](https://maic.qld.gov.au/wp-content/uploads/2016/07/DASS-21.pdf){target=\"_blank\"}.\n    This is an scale that measures three latent variables at the same\n    time, but only the anxiety items were added in this study.\n\nYour task is to change the name of the \"DASS\" items, you should think a\nmore informative name for these items in the data frame. After that, you\nwill have to compute the total score of anxiety for each participant in\nthe data frame.\n:::\n\n### Let's cleanse this data set\n\n::: column-margin\n![](datadirty.png){fig-alt=\"This is a meme, the character is a aging adult cleaning a data set like it was a window in a house\"\nwidth=\"200\"}\n:::\n\nIt is always satisfactory to clean a data set and then see the final\nproduct, but so far we have cleaned these data in small steps. I'll\nclean the data set in one step. In this example I will delete\nunnecessary columns (aka research variables), and I will translate the\nvariables to English when necessary:\n\n```{webr}\nruminationClean <- ruminationRaw |>\n  rename(otherTreatments = OtrosEspeci,\n         takinPills = medicamentos,\n         psychTreatment = tratamientopsicologico,\n         ruminationTotalScore = Rumiacion,\n         activation = ACTIVACION,\n         attention = ATENCION) |>\n  select(-PBRSad, \n         -NBRS2ad, \n         -starts_with(\"EATQ_R_\"))\n\ncolnames(ruminationClean)\n\n```\n\n::: callout-tip\n## Excercise 4 (10 points)\n\n4)  Describe the steps taken in the `R` code above.\n:::\n\n# Examine your data\n\nIn this second part we will create several plots to examine and explore\nour data. But first we'll need to compute total scores again, because\nafter all, the main point is to make conclusions about our latent\nvariables (a.k.a latent factors).\n\n```{webr}\n### I'm calculating the total score of depression, rumination, and anxiety.\n\nruminationClean <- ruminationClean |> mutate(\n    depressionTotal = rowSums(across(starts_with(\"CDI\"))), ### starts_with() function is a time saver!\n    anxietyTotal = rowSums(across(starts_with(\"DASS\"))),\n    ruminationTotal = rowSums(across(starts_with(\"CR\"))))\n\n## This part will print only the new variables in the console\nruminationClean |> \n  select(depressionTotal,\n         anxietyTotal,\n         ruminationTotal) |>\n  head()\n\n```\n\nWe have now three total scores corresponding to three different latent\nfactors: depression, anxiety, and depression. We are in a good place to\nexplore the data. It is healthy to start looking at histograms because\nthey are now continuous variables:\n\n```{webr}\nhist(ruminationClean$depressionTotal, \n     main = \"Histogram of depression's total score\",\n     breaks = 12\n     )\n```\n\nWe can see in the histogram that low values are more frequent. This is\nexpected because all the participants are healthy teenagers without any\nhistory of psychopathology. Also, pay attention that we are using the\nfunction `hist()` in `R`.\n\nWe can also generate a density plot to have an idea of the observed\nshape:\n\n```{webr}\n\n### First we need to get an estimate of the observed density:\n\nruminationDensity <- density(ruminationClean$depressionTotal, \n                             na.rm = TRUE) ## We need to add \"na.rm=\" \n#                                         because there are missing values.\nplot(ruminationDensity ,\n     main=\"Density plot: Rumination Total Score\" ,\n     xlab= \"Rumination total score\",\n     ylab= \"Likelihood\")\n```\n\nNotice the function `plot()` which is a generic function in `R` it is\nused as a method in the environment. This functions comes with `R` as a\nbase function. If you need to know how to use it you can run `?plot()`,\nbut the help section might not be helpful for new users. Additionally,\npay attention on how you can change the labels in your plot.\n\n::: callout-tip\n## Excercise 5 (15 points)\n\n5)  Create a density plot for the depression total score. Where is most\n    of the density located?\n\n::: callout-note\nR Studio has an option to save plots. Just click on the tab named\n\"Plots\", then click where it says \"Export\". You may click on ***\"Copy to\nclipboard\"***, this will allow you to paste the image on any software.\nYou may also select to export the image as PDF file or image.\n\n![Option to save generated plots](saveImage.png)\n:::\n:::\n\nBox plots are also useful to understand our data better, you may revisit\nthe box plot's anatomy in this website:\n[link.](https://r-graph-gallery.com/boxplot.html){target=\"_blank\"}\n\nWe can see the next example (Click on Run Code):\n\n```{webr}\n\nboxplot(ruminationTotal ~ sex,\n        data=ruminationClean, \n        main=\"Box Plot of Rumination total score by Sex\",\n   xlab=\"Sex\", \n   ylab=\"Rumination total score\",\n   names = c(\"women\", \"men\"))\n```\n\n::: callout-tip\n## Excercise 6 (15 points)\n\n6)  Can you tell which group in the box plot has the highest median in\n    rumination? What else can you see in the box plot?\n:::\n\n![](finalMeme.jpg){fig-align=\"center\" width=\"400\"}\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"toc-depth":4,"filters":["webr"],"self-contained":true,"highlight-style":"a11y-dark","output-file":"practice2.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.353","theme":{"light":["sandstone","../theme.scss"],"dark":["cyborg","../theme.scss"]},"toc-title":"Sections","title":"Practice 2","subtitle":"135 points","title-block-banner":true,"author":"Esteban Montenegro-Montenegro","date":"2023-10-30","resources":["webr-serviceworker.js","webr-worker.js"],"webr":{"packages":["ggplot2","dplyr"],"home-dir":"/home/esteban/MEGA/stanStateDocuments/PSYC3000/practice2"},"bibliography":["references.bib"],"csl":"apa.csl","editor":{"markdown":{"wrap":72}},"code-annotations":"hover"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}